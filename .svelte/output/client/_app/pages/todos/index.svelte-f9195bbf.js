var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,s=(e,o,a)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,n=(t,n)=>{for(var l in n||(n={}))e.call(n,l)&&s(t,l,n[l]);if(o)for(var l of o(n))a.call(n,l)&&s(t,l,n[l]);return t};import{Q as l,S as r,i as d,s as c,e as i,k as u,c as h,a as m,n as f,d as p,b as v,F as g,f as y,G as b,R as j,T as w,U as E,V as O,W as x,O as T,t as M,P as $,g as k,X as P,u as U,v as F,r as I,Y as N,B as R,Z as _,C as B}from"../../chunks/index-5ad3f4d4.js";function D(t){const e=t-1;return e*e*e+1}function S(t,{pending:e,error:o,result:a}){let s;async function n(n){const l=s={};n.preventDefault();const r=new FormData(t);e&&e(r,t);try{const e=await fetch(t.action,{method:t.method,headers:{accept:"application/json"},body:r});if(l!==s)return;e.ok?a(e,t):o?o(e,null,t):console.error(await e.text())}catch(d){if(!o)throw d;o(null,d,t)}}return t.addEventListener("submit",n),{destroy(){t.removeEventListener("submit",n)}}}function C(t,{delay:e=0,duration:o=400,easing:a=D,start:s=0,opacity:n=0}={}){const l=getComputedStyle(t),r=+l.opacity,d="none"===l.transform?"":l.transform,c=1-s,i=r*(1-n);return{delay:e,duration:o,easing:a,css:(t,e)=>`\n\t\t\ttransform: ${d} scale(${1-c*e});\n\t\t\topacity: ${r-i*e}\n\t\t`}}function V(t,e,o={}){const a=getComputedStyle(t),s="none"===a.transform?"":a.transform,n=e.from.width/t.clientWidth,r=e.from.height/t.clientHeight,d=(e.from.left-e.to.left)/n,c=(e.from.top-e.to.top)/r,i=Math.sqrt(d*d+c*c),{delay:u=0,duration:h=(t=>120*Math.sqrt(t)),easing:m=D}=o;return{delay:u,duration:l(h)?h(i):h,easing:m,css:(t,e)=>`transform: ${s} translate(${e*d}px, ${e*c}px);`}}function q(t,e,o){const a=t.slice();return a[5]=e[o],a}function H(t,e){let o,a,s,n,r,d,c,M,$,k,P,U,F,I,R,_,D,q,H,L,W,G,Q,X,Y,Z,z,A=B;function J(...t){return e[3](e[5],...t)}function K(){return e[4](e[5])}return{key:t,first:null,c(){o=i("div"),a=i("form"),s=i("input"),r=u(),d=i("button"),k=u(),P=i("form"),U=i("input"),I=u(),R=i("button"),D=u(),q=i("form"),H=i("button"),G=u(),this.h()},l(t){o=h(t,"DIV",{class:!0});var e=m(o);a=h(e,"FORM",{action:!0,method:!0});var n=m(a);s=h(n,"INPUT",{type:!0,name:!0,value:!0,class:!0}),r=f(n),d=h(n,"BUTTON",{class:!0,"aria-label":!0}),m(d).forEach(p),n.forEach(p),k=f(e),P=h(e,"FORM",{class:!0,action:!0,method:!0});var l=m(P);U=h(l,"INPUT",{type:!0,name:!0,value:!0,class:!0}),I=f(l),R=h(l,"BUTTON",{class:!0,"aria-label":!0}),m(R).forEach(p),l.forEach(p),D=f(e),q=h(e,"FORM",{action:!0,method:!0});var c=m(q);H=h(c,"BUTTON",{class:!0,"aria-label":!0}),m(H).forEach(p),c.forEach(p),G=f(e),e.forEach(p),this.h()},h(){v(s,"type","hidden"),v(s,"name","done"),s.value=n=e[5].done?"":"true",v(s,"class","svelte-mhdm0p"),v(d,"class","toggle svelte-mhdm0p"),v(d,"aria-label",c="Mark todo as "+(e[5].done?"not done":"done")),v(a,"action",M="/todos/"+e[5].uid+".json?_method=patch"),v(a,"method","post"),v(U,"type","text"),v(U,"name","text"),U.value=F=e[5].text,v(U,"class","svelte-mhdm0p"),v(R,"class","save svelte-mhdm0p"),v(R,"aria-label","Save todo"),v(P,"class","text svelte-mhdm0p"),v(P,"action",_="/todos/"+e[5].uid+".json?_method=patch"),v(P,"method","post"),v(H,"class","delete svelte-mhdm0p"),v(H,"aria-label","Delete todo"),v(q,"action",L="/todos/"+e[5].uid+".json?_method=delete"),v(q,"method","post"),v(o,"class","todo svelte-mhdm0p"),g(o,"done",e[5].done),this.first=o},m(t,n){y(t,o,n),b(o,a),b(a,s),b(a,r),b(a,d),b(o,k),b(o,P),b(P,U),b(P,I),b(P,R),b(o,D),b(o,q),b(q,H),b(o,G),Y=!0,Z||(z=[j($=S.call(null,a,{pending:J,result:e[1]})),j(S.call(null,P,{result:e[1]})),j(W=S.call(null,q,{result:K}))],Z=!0)},p(t,r){e=t,(!Y||1&r&&n!==(n=e[5].done?"":"true"))&&(s.value=n),(!Y||1&r&&c!==(c="Mark todo as "+(e[5].done?"not done":"done")))&&v(d,"aria-label",c),(!Y||1&r&&M!==(M="/todos/"+e[5].uid+".json?_method=patch"))&&v(a,"action",M),$&&l($.update)&&1&r&&$.update.call(null,{pending:J,result:e[1]}),(!Y||1&r&&F!==(F=e[5].text)&&U.value!==F)&&(U.value=F),(!Y||1&r&&_!==(_="/todos/"+e[5].uid+".json?_method=patch"))&&v(P,"action",_),(!Y||1&r&&L!==(L="/todos/"+e[5].uid+".json?_method=delete"))&&v(q,"action",L),W&&l(W.update)&&1&r&&W.update.call(null,{result:K}),1&r&&g(o,"done",e[5].done)},r(){X=o.getBoundingClientRect()},f(){w(o),A(),E(o,X)},a(){A(),A=O(o,X,V,{duration:200})},i(t){Y||(t&&N((()=>{Q||(Q=x(o,C,{start:.7},!0)),Q.run(1)})),Y=!0)},o(t){t&&(Q||(Q=x(o,C,{start:.7},!1)),Q.run(0)),Y=!1},d(t){t&&p(o),t&&Q&&Q.end(),Z=!1,T(z)}}}function L(t){let e,o,a,s,n,r,d,c,g,w,E,O,x=[],T=new Map,N=t[0];const B=t=>t[5].uid;for(let l=0;l<N.length;l+=1){let e=q(t,N,l),o=B(e);T.set(o,x[l]=H(o,e))}return{c(){e=u(),o=i("div"),a=i("h1"),s=M("Todos"),n=u(),r=i("form"),d=i("input"),g=u();for(let t=0;t<x.length;t+=1)x[t].c();this.h()},l(t){$('[data-svelte="svelte-181o7gf"]',document.head).forEach(p),e=f(t),o=h(t,"DIV",{class:!0});var l=m(o);a=h(l,"H1",{});var c=m(a);s=k(c,"Todos"),c.forEach(p),n=f(l),r=h(l,"FORM",{class:!0,action:!0,method:!0});var i=m(r);d=h(i,"INPUT",{name:!0,placeholder:!0,class:!0}),i.forEach(p),g=f(l);for(let e=0;e<x.length;e+=1)x[e].l(l);l.forEach(p),this.h()},h(){document.title="Todos",v(d,"name","text"),v(d,"placeholder","+ tap to add a todo"),v(d,"class","svelte-mhdm0p"),v(r,"class","new svelte-mhdm0p"),v(r,"action","/todos.json"),v(r,"method","post"),v(o,"class","todos svelte-mhdm0p")},m(l,i){y(l,e,i),y(l,o,i),b(o,a),b(a,s),b(o,n),b(o,r),b(r,d),b(o,g);for(let t=0;t<x.length;t+=1)x[t].m(o,null);w=!0,E||(O=j(c=S.call(null,r,{result:t[2]})),E=!0)},p(t,[e]){if(c&&l(c.update)&&1&e&&c.update.call(null,{result:t[2]}),3&e){N=t[0],R();for(let t=0;t<x.length;t+=1)x[t].r();x=P(x,e,B,1,t,N,T,o,_,H,null,q);for(let t=0;t<x.length;t+=1)x[t].a();U()}},i(t){if(!w){for(let t=0;t<N.length;t+=1)F(x[t]);w=!0}},o(t){for(let e=0;e<x.length;e+=1)I(x[e]);w=!1},d(t){t&&p(e),t&&p(o);for(let e=0;e<x.length;e+=1)x[e].d();E=!1,O()}}}const W=async({fetch:t})=>{const e=await t("/todos.json");if(e.ok){return{props:{todos:await e.json()}}}const{message:o}=await e.json();return{error:new Error(o)}};function G(t,e,o){let{todos:a}=e;return t.$$set=t=>{"todos"in t&&o(0,a=t.todos)},[a,async function(t){const e=await t.json();o(0,a=a.map((t=>t.uid===e.uid?e:t)))},async(t,e)=>{const s=await t.json();o(0,a=[...a,s]),e.reset()},(t,e)=>{const s=!!e.get("done");o(0,a=a.map((e=>e===t?n(n({},e),{done:s}):e)))},t=>{o(0,a=a.filter((e=>e.uid!==t.uid)))}]}export default class extends r{constructor(t){super(),d(this,t,G,L,c,{todos:0})}}export{W as load};
